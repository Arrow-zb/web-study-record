# ProjectPractice
尽可能把每个需求，都做成亮点（站在架构师的角度，来设计项目）
1. 纠正视角，不从开发工程师的角度来看，增删改查的代码，只是一小部分工作
2. 一个项目需要什么？
  - 文档
  - 版本控制（git）,主要是规范（包括分支的规范，message的规范）
    - git 分支管理（master  release dev test beta）
    - message 的管理
  - 质量（代码质量，eslint, jest（自动化测试）, jira(bug管理)）
  - 开发流程（敏捷开发）
  - 写代码（代码设计（分模块，分任务），代码实现，联调）
  - 发布部署（自动化部署）（mvp 版本发布，给产品虐）
  - 维护，基本的功能开发4，5 持续执行
  - 提高可维护性，提升开发效率（组件化，npm包， 私有npm服务）
  - 权限系统（cms）, 监控，统计，报错收集，量化我们的产品性能
  - 上面提高开发效率的内容，考虑固化沉淀为系统，这就是前端团队的基础建设
3. 一个项目怎么做才能算亮点？
  - 每个需求，都可以做成你的亮点，只要你有心
    - 数据流想得贼大
    - 网络清理极不稳定
    - 用户体验
  - 文件上传
    - input type=file axios.post, node接收文件存起来，over 上传进度条（10分给1分）
    - 粘贴，拖拽
    - 文件很大2G，网络很慢100K还不稳定，还可能会断
      - 文件切片，分片上传
      - 断点续传（上传之前，后端告知已经存在的切片）
      - file.slice() 就可以做文件切片了
    - 如何让后端知道你是哪个文件，如何确定文件的唯一性，用文件名肯定不靠谱
      - Md5 （hash）,但是， 2G计算Md5需要很久，15秒，会造成卡顿，怎么解决
      - 怎么解决
        - webworker
          - 会额外加载js
        - 思考一下框架源码，怎么处理量大的场景
          - 使用时间切片，时间切片来计算，利用浏览器空闲时间计算（浏览器idle）
          - requestIdleCallback 也可以自己模拟， React 就是自己模拟的（利用event-loop 的机制就可以模拟）
        - 抽样哈希
          - 抽取特征值
          - 每个切片都是 1 M， 第一个切片和最后一个切片全部的数据
            - 中间的切片，取前中后2各两字节，拼在一起
            - 文件多大，抽样都在3M 以内
          - 布隆过滤器
          - 两个文件hash一样，可能文件不一样，hash不一样，文件一定不一样 
      - 计算hash卡顿解决了，比如有100个切片
        - 如果直接promise.all 上传，浏览器发起100个tcp网络请求，虽然浏览器有并发限制，只会有6个传递数据，同时建立这么多请求，会让浏览器卡顿 
        - 控制并发数，比如控制在4，异步任务的并发数控制，使用队列就可以了，这个功能，本身就是头条经常用的笔试题。
        - 还可以做报错重试
          - 异步任务通过一个队列，如果任务出错，出列再塞进去
          - 同一个任务报错3此或者2次， 统一终止整个上传任务，提示用户报错，用对象{task1： 1}
      - 根据网速确定切片大小
        - 先传一个切片，看看返回时间
        - 怎么流畅的判定呢？
          - TCP的慢启动逻辑就可以，很流畅
          - 先丢一个小区块，判断返回时间，如果比较短*2如果超时/2
          - 2 这个系数，可以用一些数据公式，变得平缓一些
      - 文件扩展名，怎么判断是符合要求的文件呢？
        - 如果我们要求只能上传png图片
        - 每个文件都有固定的头信息，二进制的文件流 固定位数的值，确定一个文件类型，通过文件内容判断，而不是简单的后缀名
        - 图片的宽高，也在二进制里面

  - 表格渲染，列表渲染
    - 数据量大，列表渲染，   分页，虚拟列表
    需求分析
    - 登录注册 jwt
    - 个人中心 图片上传
    - 文章发布
      - 简单的定制一下 markdown 编辑器
    - 文章的列表 考虑虚拟列表
    - 用户关注，文章点赞，评论
      - 用户一对多，多对多的关系设计
    - webrtc


  技术选型
    - 技术选型没有对错，只有合不合适
    - VUE REACT

    - 团队现状
    - 上手难度
    - 技术生态

    element vs iview vs
    - 组件数
    - npm 下载数
    - 团队人数
    - 某个组件有没有
    - 配合的admin框架

  开发的规范
    - eslint
      - 老项目，可以考虑增量eslint lint-staged
    - git 分支 dev => test => master
    - git 钩子
      - precommit 之前，跑eslint
    - git log 规范
      - git commit -m "日志规范"
    - Npm Script 工作流
    - 目录规范 nuxt+eggjs 这两自己的规范，用就行了
    - 统计
      - 百度统计
      - google at native
      - growingio
    - 报错
      - sentry
    - 代码部署
      - github action 或gitlab 简单的自动化
      - push 或者 tag 触发任务，跑测试，发布部署，部署结果通知钉钉
    - axios 配置
