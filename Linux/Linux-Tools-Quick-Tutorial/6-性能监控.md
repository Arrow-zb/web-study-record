[toc]

# 性能监控

查看当前的性能如何，了解 CPU 、内存和硬盘的使用情况

## 6.1 监控 CPU

```bash
sar -u

sar -u 1 2
```

后面的两个参数表示监控的频率，例子中的1和2， 表示每秒采样一次，总共采样2次

查看 CPU 平均负载

```bash
sar -q 1 2
```

sar指定-q后，就能查看运行队列中的进程数、系统上的进程大小、平均负载等；

## 6.2 查询内存

查看内存使用状况 sar 指定 -r 

```bash
sar -r 1 2
```

查看内存使用量

```bash
free -m
```

## 6.3 查看页面交换

查看页面交换发生状况，页面发生交换时，服务器的吞吐量会大幅下降；服务器状况不良时，如果怀疑因为内存不足导致了页面交换的发生，可以使用 sar  -W 这个命令来确认是否发生了大量的交换

```bash
sar -W 1 3
```

## 6.4 查询硬盘使用

查看硬盘空间利用情况

```bash
df -h
```

查询当前目录下空间使用情况

```bash
du -sh 
```

## 6.5 综合应用

当系统中 sar 不可用时，可以使用以下工具替代： linux 下有 vmstat， Unix 系统有prstat